


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-5.3.2">
    
    
      
        <title>Custom Actions - example-docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe0cca5b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rfc-custom-github-actions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="example-docs" class="md-header-nav__button md-logo" aria-label="example-docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            example-docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Custom Actions
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="example-docs" class="md-nav__button md-logo" aria-label="example-docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    example-docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../deployment/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../local-k8s/" title="Deploy to Local Cluster (K8s/Minikube)" class="md-nav__link">
      Deploy to Local Cluster (K8s/Minikube)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../dev-deploy/" title="Deploy to Dev Environment (K8s/Helm)" class="md-nav__link">
      Deploy to Dev Environment (K8s/Helm)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../running-locally/" title="Running Locally" class="md-nav__link">
      Running Locally
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../backstage-update/" title="Backstage Update" class="md-nav__link">
      Backstage Update
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../helm/" title="Helm Charts" class="md-nav__link">
      Helm Charts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../allstar/" title="Allstar" class="md-nav__link">
      Allstar
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../cypress-troubleshooting/" title="Cypress Troubleshooting" class="md-nav__link">
      Cypress Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../pre-build-validation/" title="Pre-build Validation" class="md-nav__link">
      Pre-build Validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../catalog-entry/" title="Catalog Entry" class="md-nav__link">
      Catalog Entry
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../github-packages/" title="GitHub Packages" class="md-nav__link">
      GitHub Packages
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../starter-guide/" title="Starter Guide" class="md-nav__link">
      Starter Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../gha-dependencies/" title="GHA Dependencies" class="md-nav__link">
      GHA Dependencies
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15" checked>
    
    <label class="md-nav__link" for="nav-15">
      RFCs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="RFCs" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        RFCs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../doc-generator/" title="Doc Generator" class="md-nav__link">
      Doc Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ci-cd/" title="CI/CD Modifications" class="md-nav__link">
      CI/CD Modifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../catalog-import-research/" title="Catalog Import Research" class="md-nav__link">
      Catalog Import Research
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-app-logging/" title="Node App Logging" class="md-nav__link">
      Node App Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-scanning/" title="Docker Scanning" class="md-nav__link">
      Docker Scanning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../enforce-build-performance/" title="Enforce Build Performance" class="md-nav__link">
      Enforce Build Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../investigate-esbuild-and-vite/" title="Investigate Esbuild and Vite" class="md-nav__link">
      Investigate Esbuild and Vite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linting/" title="Linting Rules" class="md-nav__link">
      Linting Rules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../investigate-pact/" title="Investigate Pact" class="md-nav__link">
      Investigate Pact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../env-promotion/" title="Environment Promotion" class="md-nav__link">
      Environment Promotion
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Custom Actions
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Custom Actions" class="md-nav__link md-nav__link--active">
      Custom Actions
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    Goal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-custom-actions" class="md-nav__link">
    Creating Custom Actions
  </a>
  
    <nav class="md-nav" aria-label="Creating Custom Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-container-actions" class="md-nav__link">
    Docker Container Actions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javascript-actions" class="md-nav__link">
    JavaScript Actions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composite-actions" class="md-nav__link">
    Composite Actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../github-access/" title="GitHub Access" class="md-nav__link">
      GitHub Access
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../google-analytics/" title="Google Analytics" class="md-nav__link">
      Google Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configurable-variables/" title="Configurable Variables" class="md-nav__link">
      Configurable Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-logs/" title="Browser Logs" class="md-nav__link">
      Browser Logs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Decision Records
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Decision Records" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Decision Records
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/zero-install/" title="Yarn Zero Install" class="md-nav__link">
      Yarn Zero Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/split-fe-be/" title="Split FE/BE" class="md-nav__link">
      Split FE/BE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/cypress-e2e-tests/" title="Cypress e2e Tests" class="md-nav__link">
      Cypress e2e Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/code-cov/" title="Ignore Backend Code Coverage" class="md-nav__link">
      Ignore Backend Code Coverage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/vite/" title="Vite" class="md-nav__link">
      Vite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/github-packages/" title="GitHub Packages" class="md-nav__link">
      GitHub Packages
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    Goal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-custom-actions" class="md-nav__link">
    Creating Custom Actions
  </a>
  
    <nav class="md-nav" aria-label="Creating Custom Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-container-actions" class="md-nav__link">
    Docker Container Actions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javascript-actions" class="md-nav__link">
    JavaScript Actions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composite-actions" class="md-nav__link">
    Composite Actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/edit/master/docs/RFC/custom-actions.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="rfc-custom-github-actions">[RFC] Custom Github Actions<a class="headerlink" href="#rfc-custom-github-actions" title="Permanent link">&para;</a></h1>
<p><strong>Summary</strong>:</p>
<p>We want to implement custom Github Actions to retain both the simplicity, readability and maintainability of published Github Actions and the ability to create tailored workflows that fit our specific operational needs.</p>
<h2 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h2>
<p>Github Actions are workflows that allow us to automate complex tasks. Some steps are handled by actions published to the Github Actions Marketplace but other steps require a tailored solution often involving many steps that using scripts. These tailored solutions can quickly become unwieldy and difficult to understand. Moreover, some of these steps are tightly coupled which obfuscates the process of maintaining, modifying, or extending these workflows.</p>
<p>We want to add a layer of abstraction by encapsulating these steps into a single custom Github Action. Using custom Github actions we intend to transform these complex, and often tightly coupled, multi-step solutions into reusable atomic actions with simple interfaces. </p>
<h2 id="goal">Goal<a class="headerlink" href="#goal" title="Permanent link">&para;</a></h2>
<p>Create custom Github Actions with simple interfaces that we can use in our workflows.</p>
<h2 id="creating-custom-actions"><a href="https://docs.github.com/en/actions/creating-actions/about-custom-actions">Creating Custom Actions</a><a class="headerlink" href="#creating-custom-actions" title="Permanent link">&para;</a></h2>
<ul>
<li>To identify an action Github looks for an action <code>manifest</code> which is simply a file called <code>action.yml</code> or <code>action.yaml</code></li>
<li>There are three <a href="https://docs.github.com/en/actions/creating-actions/about-custom-actions#types-of-actions">types of github actions</a>:<ul>
<li>Docker container</li>
<li>JavaScript</li>
<li>Composite Actions</li>
</ul>
</li>
</ul>
<h3 id="docker-container-actions"><a href="https://docs.github.com/en/actions/creating-actions/creating-a-docker-container-action">Docker Container Actions</a><a class="headerlink" href="#docker-container-actions" title="Permanent link">&para;</a></h3>
<ul>
<li>OS: Linux</li>
<li>Packages the Github action into a docker container to create a more reliable unit of code</li>
<li>Specify aspects of the environment for the action(e.g. version of OS, dependencies, tools, etc.)</li>
<li>Additional overhead for retrieving/building the container causing the action to be slower</li>
</ul>
<h3 id="javascript-actions"><a href="https://docs.github.com/en/actions/creating-actions/creating-a-javascript-action">JavaScript Actions</a><a class="headerlink" href="#javascript-actions" title="Permanent link">&para;</a></h3>
<ul>
<li>OS: Linux, macOS, Windows</li>
<li>Runs directly on a runner machine</li>
<li>Can separate the action code from the environment used to run the code</li>
<li>Executes faster than Docker container action </li>
<li>Should be written in pure JavaScript and not rely on other binaries </li>
</ul>
<h3 id="composite-actions"><a href="https://docs.github.com/en/actions/creating-actions/creating-a-composite-action">Composite Actions</a><a class="headerlink" href="#composite-actions" title="Permanent link">&para;</a></h3>
<ul>
<li>OS: Linux, macOS, Windows</li>
<li>Allows you to bundle multiple workflow steps into a single action</li>
<li>You can refer to this action using a single step from a workflow to run the bundle of commands</li>
</ul>
<h2 id="implementation">Implementation<a class="headerlink" href="#implementation" title="Permanent link">&para;</a></h2>
<p>I created an example of a <code>composite</code> action using this repository. This method uses the path to <code>.github/actions/&lt;custom_action_name&gt;</code> to find the custom action's manifest file. </p>
<blockquote>
<p>Note: There is another method of locating actions by creating a separate repository with tags to reference. I created a repository <code>lighthouse-backstage-actions</code> but it is currently set to <code>internal</code> by default and an organization owner/admin needs to change it to <code>public</code> for us to use it.</p>
</blockquote>
<ul>
<li>Inside the <code>.github</code> directory is an <code>actions</code> directory
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>.
└── .github/
    ├── pull_request_template.md
    ├── workflows/
    └── actions/
        └── logger/
            └── action.yml
</code></pre></div>
</td></tr></table></li>
</ul>
<ul>
<li>Inside the <code>actions</code> directory is a <code>logger</code> directory containing a single <code>action.yml</code> file<ul>
<li>The <code>logger</code> directory refers to the name of the action</li>
<li>The <code>action.yml</code> is an action manifest file</li>
<li>The path to the <code>action.yml</code> will be used later to find the action manifest when a workflow tries to invoke it</li>
</ul>
</li>
</ul>
<ul>
<li>Contents of the manifest:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code># action.yml
name: &#39;Logger&#39;
description: &#39;Logs things&#39;
inputs:
  string-to-log:  
    description: &#39;string to log&#39;
    required: true
    default: &#39;Enter a phrase to log&#39;

# outputs can also be defined here but this action doesn&#39;t have any

runs:
  using: &quot;composite&quot;
  steps:
    - uses: actions/checkout@v2
    - uses: actions/github-script@v3
      with:
        script: console.log(&quot;${{ inputs.string-to-log }}&quot;)
</code></pre></div>
</td></tr></table></li>
</ul>
<ul>
<li>Using the action in a workflow
<pre></li>
</ul>
<h1 id="githubworkflowsexample_custom_actionyml">.github/workflows/example_custom_action.yml<a class="headerlink" href="#githubworkflowsexample_custom_actionyml" title="Permanent link">&para;</a></h1>
<p>name: Example custom action</p>
<p>on:
  push:
    branches: [custom-actions]
  pull_request:
    branches: [main]
  workflow_dispatch:</p>
<p>jobs:
  example-custom-action:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v2
      # Using path to same repo works  <br />
      <b>- uses: ./.github/actions/logger
        with: 
          string-to-log: 'This should log in the console'</b>
</pre></p>
<ul>
<li>Result from <a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/runs/3883781943?check_suite_focus=true">workflow run</a>:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>Run actions/github-script@v3
  with:
    script: console.log(&quot;This should log in the console&quot;)
    github-token: ***
    debug: false
    user-agent: actions/github-script
    result-encoding: json
This should log in the console
</code></pre></div>
</td></tr></table></li>
</ul>
<h2 id="recommendation">Recommendation<a class="headerlink" href="#recommendation" title="Permanent link">&para;</a></h2>
<p>I think that we should first audit our existing workflows to determine which workflows, or parts of workflows, we intend to keep. Of these workflows we can then identify steps or groups of steps where we can potentionally implement a custom action. Then we can further consolidate the group of potential custom actions by identifying redundancies. Once we have a refined list of custom actions we can create each action and implement it by replace the corresponding steps in our workflows with our custom actions.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../env-promotion/" title="Environment Promotion" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Environment Promotion
              </div>
            </div>
          </a>
        
        
          <a href="../github-access/" title="GitHub Access" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                GitHub Access
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.7f4f3c92.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>