


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-5.3.2">
    
    
      
        <title>Enforce Build Performance - example-docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe0cca5b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rfc-enforce-build-performance" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="example-docs" class="md-header-nav__button md-logo" aria-label="example-docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            example-docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Enforce Build Performance
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="example-docs" class="md-nav__button md-logo" aria-label="example-docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    example-docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../deployment/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../local-k8s/" title="Deploy to Local Cluster (K8s/Minikube)" class="md-nav__link">
      Deploy to Local Cluster (K8s/Minikube)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../dev-deploy/" title="Deploy to Dev Environment (K8s/Helm)" class="md-nav__link">
      Deploy to Dev Environment (K8s/Helm)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../running-locally/" title="Running Locally" class="md-nav__link">
      Running Locally
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../backstage-update/" title="Backstage Update" class="md-nav__link">
      Backstage Update
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../helm/" title="Helm Charts" class="md-nav__link">
      Helm Charts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../allstar/" title="Allstar" class="md-nav__link">
      Allstar
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../cypress-troubleshooting/" title="Cypress Troubleshooting" class="md-nav__link">
      Cypress Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../pre-build-validation/" title="Pre-build Validation" class="md-nav__link">
      Pre-build Validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../catalog-entry/" title="Catalog Entry" class="md-nav__link">
      Catalog Entry
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../github-packages/" title="GitHub Packages" class="md-nav__link">
      GitHub Packages
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../starter-guide/" title="Starter Guide" class="md-nav__link">
      Starter Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../gha-dependencies/" title="GHA Dependencies" class="md-nav__link">
      GHA Dependencies
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15" checked>
    
    <label class="md-nav__link" for="nav-15">
      RFCs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="RFCs" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        RFCs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../doc-generator/" title="Doc Generator" class="md-nav__link">
      Doc Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ci-cd/" title="CI/CD Modifications" class="md-nav__link">
      CI/CD Modifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../catalog-import-research/" title="Catalog Import Research" class="md-nav__link">
      Catalog Import Research
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-app-logging/" title="Node App Logging" class="md-nav__link">
      Node App Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-scanning/" title="Docker Scanning" class="md-nav__link">
      Docker Scanning
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Enforce Build Performance
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Enforce Build Performance" class="md-nav__link md-nav__link--active">
      Enforce Build Performance
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    Goal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#information" class="md-nav__link">
    Information
  </a>
  
    <nav class="md-nav" aria-label="Information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-action-artifacts" class="md-nav__link">
    GitHub Action Artifacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tracking-build-time" class="md-nav__link">
    Tracking Build Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-prs-by-build-time" class="md-nav__link">
    Stopping PR's by Build Time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommendation" class="md-nav__link">
    Recommendation
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../investigate-esbuild-and-vite/" title="Investigate Esbuild and Vite" class="md-nav__link">
      Investigate Esbuild and Vite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linting/" title="Linting Rules" class="md-nav__link">
      Linting Rules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../investigate-pact/" title="Investigate Pact" class="md-nav__link">
      Investigate Pact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../env-promotion/" title="Environment Promotion" class="md-nav__link">
      Environment Promotion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-actions/" title="Custom Actions" class="md-nav__link">
      Custom Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../github-access/" title="GitHub Access" class="md-nav__link">
      GitHub Access
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../google-analytics/" title="Google Analytics" class="md-nav__link">
      Google Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configurable-variables/" title="Configurable Variables" class="md-nav__link">
      Configurable Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-logs/" title="Browser Logs" class="md-nav__link">
      Browser Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-timeouts/" title="Configure Timeouts" class="md-nav__link">
      Configure Timeouts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Decision Records
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Decision Records" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Decision Records
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/zero-install/" title="Yarn Zero Install" class="md-nav__link">
      Yarn Zero Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/split-fe-be/" title="Split FE/BE" class="md-nav__link">
      Split FE/BE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/cypress-e2e-tests/" title="Cypress e2e Tests" class="md-nav__link">
      Cypress e2e Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/code-cov/" title="Ignore Backend Code Coverage" class="md-nav__link">
      Ignore Backend Code Coverage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/vite/" title="Vite" class="md-nav__link">
      Vite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/github-packages/" title="GitHub Packages" class="md-nav__link">
      GitHub Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/twelve-factor-app/" title="Twelve Factor App" class="md-nav__link">
      Twelve Factor App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ADR/image-signing/" title="Image Signing" class="md-nav__link">
      Image Signing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    Goal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#information" class="md-nav__link">
    Information
  </a>
  
    <nav class="md-nav" aria-label="Information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-action-artifacts" class="md-nav__link">
    GitHub Action Artifacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tracking-build-time" class="md-nav__link">
    Tracking Build Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-prs-by-build-time" class="md-nav__link">
    Stopping PR's by Build Time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommendation" class="md-nav__link">
    Recommendation
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/department-of-veterans-affairs/lighthouse-backstage/edit/master/docs/RFC/enforce-build-performance.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="rfc-enforce-build-performance">[RFC] Enforce Build Performance<a class="headerlink" href="#rfc-enforce-build-performance" title="Permanent link">&para;</a></h1>
<p><strong>Summary</strong>:</p>
<p>Enforcing a built time will help us track how efficient our software pipeline is along with helping to expose issues that may surface as random spikes in the build time. We can surface these issues more directly by explicitly causing builds to fail when they go over a pre-determined amount of time.</p>
<h2 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h2>
<p>Backstage has been setup to use a container for a <a href="https://backstage.io/docs/deployment/docker#separate-frontend">separate frontend</a> that uses NGINX and a backend container. The build time seems to be about 12-13 minutes on average. Some can take as long as 15 while others can be as short as 7 minutes.</p>
<h2 id="goal">Goal<a class="headerlink" href="#goal" title="Permanent link">&para;</a></h2>
<p>Our goal is to enforce a maximum build time (15 minutes) that will allow us to keep track of how efficient our software pipeline is along with helping to expose issues that effect the application. GitHub Action Artifacts should be used the track the build-time and prevent PR's that increase the overall build time.</p>
<h2 id="information">Information<a class="headerlink" href="#information" title="Permanent link">&para;</a></h2>
<h3 id="github-action-artifacts">GitHub Action Artifacts<a class="headerlink" href="#github-action-artifacts" title="Permanent link">&para;</a></h3>
<p><a href="https://docs.github.com/en/actions/advanced-guides/storing-workflow-data-as-artifacts">Storing Workflow Data as Artifacts</a></p>
<p>Artifacts allow you to persist data after a job has completed, and share that data with another job in the same workflow. An artifact is a file or collection of files produced during a workflow run. For example, you can use artifacts to save your build and test output after a workflow run has ended.</p>
<p>To share data between jobs:</p>
<ul>
<li>Uploading files: Give the uploaded file a name and upload the data before the job ends.</li>
<li>Downloading files: You can only download artifacts that were uploaded during the same workflow run. When you download a file, you can reference it by name.</li>
</ul>
<p><a href="https://github.com/actions/upload-artifact">Upload Artifact Action</a>
<a href="https://github.com/actions/download-artifact">Download Artifact Action</a></p>
<h3 id="tracking-build-time">Tracking Build Time<a class="headerlink" href="#tracking-build-time" title="Permanent link">&para;</a></h3>
<p><a href="https://docs.github.com/en/rest/reference/actions#get-workflow-run-usage">Get Workflow Run Usage</a></p>
<p>Returns the total run time for a specific workflow run. Usage is listed for each GitHub-hosted runner operating system in milliseconds.</p>
<p><a href="https://docs.github.com/en/rest/reference/actions#list-workflow-runs">List workflow runs</a></p>
<p>This action can list all workflow runs for a workflow. Additional parameters can be used to narrow a search.</p>
<h3 id="stopping-prs-by-build-time">Stopping PR's by Build Time<a class="headerlink" href="#stopping-prs-by-build-time" title="Permanent link">&para;</a></h3>
<p>Jobs can have a <code>timeout-minutes</code> setting that will fail a job if it exceeds the timeout. By default, it is 360. It can be set on a job or a single step within a job.</p>
<p><a href="https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#jobsjob_idstepstimeout-minutes">Timeout-minutes ref</a></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nt">my-job</span><span class="p">:</span>
  <span class="nt">runs-on</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
  <span class="nt">timeout-minutes</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
</code></pre></div>
</td></tr></table>

<h2 id="recommendation">Recommendation<a class="headerlink" href="#recommendation" title="Permanent link">&para;</a></h2>
<p>I think the best way to enforce a build time along with keeping track of builds over time should be done by using GitHub Artifacts.</p>
<p>An extra job should be added to the <code>build-containers</code> workflow that grabs all the previous workflow build times from the main branch, calculates an average build time, and then sets that value as an ENV variable.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1"># Obtaining workflow run usage</span>

curl <span class="se">\</span>
  -H <span class="s2">&quot;Accept: application/vnd.github.v3+json&quot;</span> <span class="se">\</span>
  https://api.github.com/repos/<span class="o">{</span>owner<span class="o">}</span>/<span class="o">{</span>repo<span class="o">}</span>/actions/runs/<span class="o">{</span>run_id<span class="o">}</span>/timing
</code></pre></div>
</td></tr></table>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1"># Setting an ENV variable</span>

<span class="nt">jobs</span><span class="p">:</span>
  <span class="nt">example-job</span><span class="p">:</span>
    <span class="nt">steps</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">run</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="l l-Scalar l-Scalar-Plain">echo &#39;NEW_ENV_VAR=&#39;&lt;value&gt; &gt;&gt; $GITHUB_ENV</span>
</code></pre></div>
</td></tr></table>

<p>Then, each build job can have a set timeout that adds a few minutes onto the average build. If the build exceeds the minutes it'll fail and display an error message that the build time was exceeded.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../docker-scanning/" title="Docker Scanning" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Docker Scanning
              </div>
            </div>
          </a>
        
        
          <a href="../investigate-esbuild-and-vite/" title="Investigate Esbuild and Vite" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Investigate Esbuild and Vite
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.7f4f3c92.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>