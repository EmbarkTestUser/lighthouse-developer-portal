


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-5.3.2">
    
    
      
        <title>Customizing Components - Embark Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customizing-components" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Embark Documentation" class="md-header-nav__button md-logo" aria-label="Embark Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Embark Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Customizing Components
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/department-of-veterans-affairs/lighthouse-embark/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Embark Documentation" class="md-nav__button md-logo" aria-label="Embark Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Embark Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/department-of-veterans-affairs/lighthouse-embark/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deployment/" title="Deployment Overview" class="md-nav__link">
      Deployment Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../dev-deploy/" title="Deploy to Dev Environment (K8s/Helm)" class="md-nav__link">
      Deploy to Dev Environment (K8s/Helm)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../running-locally/" title="Running Locally" class="md-nav__link">
      Running Locally
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../backstage-update/" title="Backstage Update" class="md-nav__link">
      Backstage Update
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../allstar/" title="Allstar" class="md-nav__link">
      Allstar
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cypress-troubleshooting/" title="Cypress Troubleshooting" class="md-nav__link">
      Cypress Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../pre-build-validation/" title="Pre-build Validation" class="md-nav__link">
      Pre-build Validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../catalog-entry/" title="Catalog Entry" class="md-nav__link">
      Catalog Entry
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../github-packages/" title="GitHub Packages" class="md-nav__link">
      GitHub Packages
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../starter-guide/" title="Starter Guide" class="md-nav__link">
      Starter Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../gha-dependencies/" title="GHA Dependencies" class="md-nav__link">
      GHA Dependencies
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing-guide/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../codespace/" title="Codespace" class="md-nav__link">
      Codespace
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../repo-setup/" title="Repo Setup" class="md-nav__link">
      Repo Setup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      RFCs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="RFCs" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        RFCs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/doc-generator/" title="Doc Generator" class="md-nav__link">
      Doc Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/ci-cd/" title="CI/CD Modifications" class="md-nav__link">
      CI/CD Modifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/catalog-import-research/" title="Catalog Import Research" class="md-nav__link">
      Catalog Import Research
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/node-app-logging/" title="Node App Logging" class="md-nav__link">
      Node App Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/docker-scanning/" title="Docker Scanning" class="md-nav__link">
      Docker Scanning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/enforce-build-performance/" title="Enforce Build Performance" class="md-nav__link">
      Enforce Build Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/investigate-esbuild-and-vite/" title="Investigate Esbuild and Vite" class="md-nav__link">
      Investigate Esbuild and Vite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/linting/" title="Linting Rules" class="md-nav__link">
      Linting Rules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/investigate-pact/" title="Investigate Pact" class="md-nav__link">
      Investigate Pact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/env-promotion/" title="Environment Promotion" class="md-nav__link">
      Environment Promotion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/custom-actions/" title="Custom Actions" class="md-nav__link">
      Custom Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/github-access/" title="GitHub Access" class="md-nav__link">
      GitHub Access
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/google-analytics/" title="Google Analytics" class="md-nav__link">
      Google Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/configurable-variables/" title="Configurable Variables" class="md-nav__link">
      Configurable Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/browser-logs/" title="Browser Logs" class="md-nav__link">
      Browser Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/argo-automation/" title="Automation with ArgoCD" class="md-nav__link">
      Automation with ArgoCD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/kustomize/" title="Kustomize Deployment" class="md-nav__link">
      Kustomize Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/feature-flags/" title="Feature Flags" class="md-nav__link">
      Feature Flags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/configure-timeouts/" title="Configure Timeouts" class="md-nav__link">
      Configure Timeouts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/github-app-auth/" title="GitHub App POC" class="md-nav__link">
      GitHub App POC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/search-comparison/" title="Search Optimization Comparison" class="md-nav__link">
      Search Optimization Comparison
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RFC/plugin-authentication/" title="Plugin Authentication and Authorization" class="md-nav__link">
      Plugin Authentication and Authorization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Decision Records
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Decision Records" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Decision Records
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/zero-install/" title="Yarn Zero Install" class="md-nav__link">
      Yarn Zero Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/split-fe-be/" title="Split FE/BE" class="md-nav__link">
      Split FE/BE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/cypress-e2e-tests/" title="Cypress e2e Tests" class="md-nav__link">
      Cypress e2e Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/code-cov/" title="Ignore Backend Code Coverage" class="md-nav__link">
      Ignore Backend Code Coverage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/vite/" title="Vite" class="md-nav__link">
      Vite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/github-packages/" title="GitHub Packages" class="md-nav__link">
      GitHub Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/twelve-factor-app/" title="Twelve Factor App" class="md-nav__link">
      Twelve Factor App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/image-signing/" title="Image Signing" class="md-nav__link">
      Image Signing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/code-coverage/" title="Unit Test Coverage" class="md-nav__link">
      Unit Test Coverage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ADR/google-analytics/" title="Remove Google Analytics" class="md-nav__link">
      Remove Google Analytics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-do-it" class="md-nav__link">
    Don't do it!
  </a>
  
    <nav class="md-nav" aria-label="Don't do it!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-the-api" class="md-nav__link">
    Use the API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wrap-it" class="md-nav__link">
    Wrap it
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-to-customize" class="md-nav__link">
    When to customize
  </a>
  
    <nav class="md-nav" aria-label="When to customize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copypasta" class="md-nav__link">
    Copy/Pasta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-subtree" class="md-nav__link">
    Git Subtree
  </a>
  
    <nav class="md-nav" aria-label="Git Subtree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#making-changes-to-the-split-repo" class="md-nav__link">
    Making changes to the split repo
  </a>
  
    <nav class="md-nav" aria-label="Making changes to the split repo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#receiving-upstream-commits" class="md-nav__link">
    Receiving upstream commits
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-a-pr" class="md-nav__link">
    Make a PR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/department-of-veterans-affairs/lighthouse-embark/edit/master/docs/customizing-components.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="customizing-components">Customizing Components<a class="headerlink" href="#customizing-components" title="Permanent link">&para;</a></h1>
<p>A guide for altering, customizing, and updating components from <a href="https://backstage.io/docs/overview/what-is-backstage">Backstage</a>.</p>
<h2 id="dont-do-it">Don't do it!<a class="headerlink" href="#dont-do-it" title="Permanent link">&para;</a></h2>
<p>Before attempting to customize a component ask yourself these questions.</p>
<ul>
<li>Is there an API that I can access?</li>
<li>Is it possible to wrap the component with another?</li>
</ul>
<p>Most of the time, using an API or wrapping an existing component can provide the desired functionality.</p>
<h3 id="use-the-api">Use the API<a class="headerlink" href="#use-the-api" title="Permanent link">&para;</a></h3>
<p>Backstage has tons of APIs available!</p>
<blockquote>
<p>Backstage Plugins strive to be self-contained, with as much functionality as possible residing within the plugin itself and its backend APIs.</p>
</blockquote>
<p>Each Utility API is tied to an <code>APIRef</code> instance, its only purpose is to reference Utility APIs.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useApi</span><span class="p">,</span> <span class="nx">errorApiRef</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@backstage/core-plugin-api&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">MyComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">errorApi</span> <span class="o">=</span> <span class="nx">useApi</span><span class="p">(</span><span class="nx">errorApiRef</span><span class="p">);</span>

  <span class="c1">// Signal to the app that something went wrong, and display the error to the user.</span>
  <span class="kd">const</span> <span class="nx">handleError</span> <span class="o">=</span> <span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">errorApi</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// the rest of the component ...</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>

<p>Backstage has an <a href="https://backstage.io/docs/reference/">API Package Index</a> you can use to search available APIs.</p>
<p>More often than not, components using APIs will require a <a href="https://reactjs.org/docs/context.html">React Context</a> object that's located higher up within the hierarchy. Most of them are initialized within App.tsx, where all the route's are declared. This means that we can access the same context that the component is using.</p>
<p>For Example, say you need to track search terms, but you are unable to edit the search component...</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Say that this component comes from a package and can&#39;t be edited</span>
<span class="kd">const</span> <span class="nx">UntouchableSearch</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">term</span><span class="p">,</span> <span class="nx">setTerm</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useApi</span><span class="p">(</span><span class="nx">SearchApiRef</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">input</span>
        <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">term</span><span class="p">}</span>
        <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="nx">setTerm</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">}}</span>
      <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
    <span class="o">&lt;</span><span class="err">/form&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="c1">// because our component is within the context provider, we can access and update the</span>
<span class="c1">// same values that the UntouchableSearch component is using.</span>
<span class="kd">const</span> <span class="nx">MyCoolComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">term</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useApi</span><span class="p">(</span><span class="nx">SearchApiRef</span><span class="p">);</span>

  <span class="c1">// Now we can track the current term whenever it updates in a different component</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">analytics</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="nx">term</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">term</span><span class="p">]);</span>
<span class="p">};</span>

<span class="c1">// The app has wrapped routes with the search API context provider</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">SearchContextProvider</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">MyCoolComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">UntouchableSearch</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/SearchContextProvider&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>

<h3 id="wrap-it">Wrap it<a class="headerlink" href="#wrap-it" title="Permanent link">&para;</a></h3>
<p>Sometimes we need to pass props down, or add additional functionality to an existing component, like click events.</p>
<p>If we have access to the component, for example it's exported by the package, we can wrap it.</p>
<p>For example, we needed to add a click event to the <code>SidebarSubmenuItem</code> in order to allow component <code>kind</code> links from the sidebar. Normally we'd just pass a <code>onClick</code> event to the component, however TypeScript prevents this as it's not an allowed prop for the component. How can we solve this? With a wrapper!</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// By adding a wrapping div element, we can use the onClick event when the `SidebarSubmenuItem` without altering it.</span>
<span class="o">&lt;</span><span class="nx">div</span>
  <span class="nx">aria</span><span class="o">-</span><span class="nx">hidden</span>
  <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Clicked!&#39;</span><span class="p">);</span>
  <span class="p">}}</span>
<span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">SidebarSubmenuItem</span>
    <span class="nx">title</span><span class="o">=</span><span class="p">{</span><span class="sb">`</span><span class="si">${</span><span class="nx">kind</span><span class="si">}</span><span class="sb">s`</span><span class="p">}</span>
    <span class="nx">to</span><span class="o">=</span><span class="p">{</span><span class="sb">`catalog?filters[kind]=</span><span class="si">${</span><span class="nx">kind</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
    <span class="nx">icon</span><span class="o">=</span><span class="p">{</span><span class="nx">catalogKindIcon</span><span class="p">[</span><span class="nx">kind</span><span class="p">]</span> <span class="o">||</span> <span class="nx">AppsIcon</span><span class="p">}</span>
  <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
</td></tr></table>

<h2 id="when-to-customize">When to customize<a class="headerlink" href="#when-to-customize" title="Permanent link">&para;</a></h2>
<p>There are definitely cases where the only option is to copy/pasta an entire component or plugin to make the changes you need. Most of the time this is because the component that needs to be customized isn't exported. These methods allow us to make any customizations to existing components by directly altering them. Keep in mind that these methods should only be used when there are no other alternatives. It adds extra work and extra code to maintain.</p>
<p>Some situations that can't be fixed by wrapping or API context:</p>
<ul>
<li>A component uses it's own context that we can't access.</li>
<li>The component we need to wrap isn't exported to us.</li>
<li>TypeScript doesn't allow a specific prop to be passed down.</li>
<li>I need to edit the style of a nested component that isn't exported.</li>
</ul>
<h3 id="copypasta">Copy/Pasta<a class="headerlink" href="#copypasta" title="Permanent link">&para;</a></h3>
<p>Probably the easiest way, just copy/pasta the necessary code into the codebase. You can include only what you need, but sometimes you'll need a lot if the component that needs customizations is deep. At the same time this code will be the hardest to update.</p>
<p>Consider copy/past fore entire plugins/packages if they aren't updated frequently. It'd be easy to check back every now and then for updates, rather than checking individual components.</p>
<h3 id="git-subtree">Git Subtree<a class="headerlink" href="#git-subtree" title="Permanent link">&para;</a></h3>
<p><a href="https://www.w3docs.com/learn-git/git-subtree.html">Git Subtree</a>
<a href="https://stackoverflow.com/questions/24577084/forking-a-sub-directory-of-a-repository-on-github-and-making-it-part-of-my-own-r">Stack Overflow Guide</a></p>
<blockquote>
<p>Git Subtree is an alternative to Git Submodule. It allows nesting one repository inside another one as a subdirectory. A subtree is just a subdirectory that you can commit to, branch, and merge along with your project.</p>
</blockquote>
<p>Git Subtree can be a beneficial method to customizing specific components while also keeping it up to date with any commits made to the original repo. This method should be used when a customized component is part of a plugin/package that is updated frequently.</p>
<p>First, clone the entire repository.</p>
<p><code>git clone https://github.com/backstage/backstage.git</code></p>
<p>Then use <code>git subtree split</code> to only include the directory that we want.</p>
<p><code>git subtree split --prefix&lt;directory&gt; -b &lt;branch-name&gt;</code></p>
<p>Now checkout the newly created branch.</p>
<p><code>git checkout &lt;branch-name&gt;</code></p>
<p>Now, let's set up the remotes. We'll need to rename the origin to something else.</p>
<p><code>git remote rename origin &lt;upstream-name&gt;</code></p>
<p>Next we'll need to create a new repo on GitHub to contain our changes.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git remote add origin &lt;new-repo-url&gt;
git fetch origin
git push -u origin &lt;branch-name&gt;
</code></pre></div>
</td></tr></table>

<p>Finally, we can make a new branch called <code>main</code> that will contain any customizations.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git checkout -b main
git push -u origin main
</code></pre></div>
</td></tr></table>

<p>CONGRATS!!!!!! You now have a "fork" of the main repo!</p>
<h4 id="making-changes-to-the-split-repo">Making changes to the split repo<a class="headerlink" href="#making-changes-to-the-split-repo" title="Permanent link">&para;</a></h4>
<p>Be sure to make changes to the <code>main</code> branch that was created. the <code>&lt;branch-name&gt;</code> used to create the split should only contain commits from the upstream project.</p>
<h5 id="receiving-upstream-commits">Receiving upstream commits<a class="headerlink" href="#receiving-upstream-commits" title="Permanent link">&para;</a></h5>
<p>In order to get updates from the upstream rep, we'll have to use a combo of <code>git</code> and <code>git subtree</code> commands.</p>
<p>First, update the main branch, <code>master</code> for Backstage, to the current version of the main repo.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git checkout master
git pull
</code></pre></div>
</td></tr></table>

<p>This will pull all new commits.</p>
<p>Next, we will update <code>&lt;branch-name&gt;</code> with the new filtered version of the commits. Since <code>git subtree</code> ensures that commit hashes will be the same, this should be a clean process. Note that you want to run these commands while still on the <code>master</code> branch.</p>
<p><code>git subtree split --prefix=&lt;directory&gt; --onto &lt;branch-name&gt; -b &lt;branch-name&gt;</code></p>
<p>With <code>&lt;branch-name&gt;</code> now updated, you can update the <code>main</code> branch with whatever customizations.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git checkout main
git rebase &lt;branch-name&gt;
</code></pre></div>
</td></tr></table>

<p>And that's it! A subdirectory, or even individual file can be customized and still be up to date with the primary repository!.</p>
<h3 id="make-a-pr">Make a PR<a class="headerlink" href="#make-a-pr" title="Permanent link">&para;</a></h3>
<p>Would the customizations benefit other users of Backstage? Creating a PR for updated components can help everyone, especially if it's a bug fix! Backstage maintainers are pretty quick to review submitted PRs but can still take time to actually get it merged. For example, a PR to fix a bug in the <a href="https://github.com/backstage/backstage/tree/master/plugins/github-actions">github-actions-plugin</a> took about 12 days to finally get merged.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.7f4f3c92.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>